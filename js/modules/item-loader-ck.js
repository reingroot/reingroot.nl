define(["jquery"],function(e){var t,n,r,i,s,o="",u=function(s){t=e(s);itemsContainerWidth=t.outerWidth();n=t.find(t.data("loaderContainer"));r=n.find(t.data("loaderItems"));t.css("position","relative");i=e(document.createElement("section"));i.addClass("item-wrapper");t.append(i);t.on("transitionend",function(e){var t=parseInt(i.css("left"));switch(o){case"resize":a();break;case"slideOut":h()}});r.on("click",function(n){var r=e(this),i=r.find("a").attr("href"),s=/\/(item)\//;i=i.replace(s,"/ajax_$1/");f(i,l);n.preventDefault()})},a=function(){o="slideIn";var e=parseInt(i.css("left"));!e==0&&i.css("left",0)},f=function(t,n){e.ajax({type:"POST",url:t,data:{},dataType:"html"}).done(function(e){i.html(e);i.find(".js-to-overview").on("click",function(e){c();e.preventDefault()});i.find(".js-to-next").on("click",function(e){next();e.preventDefault()});i.find(".js-to-previous").on("click",function(e){previous();e.preventDefault()});n&&setTimeout(n,200)})},l=function(){o="resize";s||(s=t.height());var n=i.outerHeight(),r=parseInt(t.css("paddingTop")),u=parseInt(t.css("paddingBottom")),a=n-(r+u);t.height(a+"px")},c=function(){o="slideOut";i.css("left",itemsContainerWidth*-1-10+"px")},h=function(){o="";i.addClass("no-transition");t.height(s+"px");i.css("left",itemsContainerWidth+10+"px");setTimeout(function(){i.removeClass("no-transition")},0)};return{init:u,slideIn:a,load:f,slideOut:c}});