define(["jquery"],function(e){var t,n,r,i,s,o="",u=function(u){t=e(u);s=t.height();n=t.find(t.data("loaderContainer"));r=n.find(t.data("loaderItems"));t.css("position","relative");i=e(document.createElement("section"));i.addClass("item-wrapper transition-height");t.append(i);t.on("webkitTransitionEnd transitionend transitionEnd msTransitionEnd oTransitionEnd",function(e){var t=parseInt(i.css("left"));switch(o){case"resize":a();break;case"slideOut":h();break;case"":p()}});r.on("click",function(t){var n=e(this),r=n.find("a").attr("href");f(r,l);t.preventDefault()});var c;e(window).on("resize",function(){clearTimeout(c);c=setTimeout(function(){s=t.height()},500)})},a=function(){o="slideIn";var e=parseInt(i.css("left"));e!==0&&i.css("left",0)},f=function(t,n){var r=/\/(item)\//;t=t.replace(r,"/ajax_$1/");e.ajax({type:"POST",url:t,data:{},dataType:"html"}).done(function(t){i.html(t);i.find(".js-to-overview").on("click",function(e){c();e.preventDefault()});i.find(".js-to-next").on("click",function(t){var n=e(this),r=n.attr("href");f(r,l);t.preventDefault()});i.find(".js-to-previous").on("click",function(t){var n=e(this),r=n.attr("href");f(r,l);t.preventDefault()});n&&setTimeout(n,200)})},l=function(){o="resize";t.addClass("no-transition");t.height(t.height());var n,r=i.outerHeight(),s=t.outerHeight(),u=t.height();if(r>s){var a=s-u;n=r-a;setTimeout(function(){t.removeClass("no-transition");t.height(n+"px")},0)}else if(r<s){i.addClass("no-transition");i.height(r);n=r+(s-r);setTimeout(function(){i.removeClass("no-transition");i.height(n+"px")},0)}else setTimeout(function(){t.trigger("transitionend")},0)},c=function(){o="slideOut";var e=t.outerWidth();i.css("left",e*-1-10+"px")},h=function(){o="";var e=t.outerWidth();i.addClass("no-transition");i.css("left",e+10+"px").height("auto");t.height()>s?t.height(s+"px"):t.height()===parseInt(s)&&t.trigger("transitionend");setTimeout(function(){i.removeClass("no-transition")},0)},p=function(){t.addClass("no-transition");t.height("auto");setTimeout(function(){t.removeClass("no-transition")},0)};return{init:u,slideIn:a,load:f,slideOut:c}});